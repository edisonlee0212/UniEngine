\hypertarget{_physics_manager_8hpp_source}{}\doxysection{Physics\+Manager.\+hpp}
\label{_physics_manager_8hpp_source}\index{C:/Users/lllll/Documents/GitHub/UniEngine/include/lib/Engine/Managers/PhysicsManager.hpp@{C:/Users/lllll/Documents/GitHub/UniEngine/include/lib/Engine/Managers/PhysicsManager.hpp}}
\mbox{\hyperlink{_physics_manager_8hpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{preprocessor}{\#pragma once}}
\DoxyCodeLine{2 \textcolor{preprocessor}{\#include <\mbox{\hyperlink{_i_singleton_8hpp}{ISingleton.hpp}}>}}
\DoxyCodeLine{3 \textcolor{preprocessor}{\#include <\mbox{\hyperlink{_joint_8hpp}{Joint.hpp}}>}}
\DoxyCodeLine{4 \textcolor{preprocessor}{\#include <\mbox{\hyperlink{_physics_material_8hpp}{PhysicsMaterial.hpp}}>}}
\DoxyCodeLine{5 \textcolor{preprocessor}{\#include <uniengine\_export.h>}}
\DoxyCodeLine{6 \textcolor{preprocessor}{\#include <\mbox{\hyperlink{_collider_8hpp}{Collider.hpp}}>}}
\DoxyCodeLine{7 \textcolor{keyword}{using namespace }physx;}
\DoxyCodeLine{8 \textcolor{keyword}{namespace }\mbox{\hyperlink{namespace_y_a_m_l}{YAML}}}
\DoxyCodeLine{9 \{}
\DoxyCodeLine{10 \textcolor{keyword}{class }Node;}
\DoxyCodeLine{11 \textcolor{keyword}{class }Emitter;}
\DoxyCodeLine{12 \textcolor{keyword}{template}<>}
\DoxyCodeLine{13 \textcolor{keyword}{struct }convert<PxVec2> \{}
\DoxyCodeLine{14     \textcolor{keyword}{static} Node \mbox{\hyperlink{struct_y_a_m_l_1_1convert_3_01_px_vec2_01_4_a242d53de33f2505e44b2c493839b461c}{encode}}(\textcolor{keyword}{const} PxVec2\& rhs) \{}
\DoxyCodeLine{15         Node node;}
\DoxyCodeLine{16         node.push\_back(rhs.x);}
\DoxyCodeLine{17         node.push\_back(rhs.y);}
\DoxyCodeLine{18         \textcolor{keywordflow}{return} node;}
\DoxyCodeLine{19     \}}
\DoxyCodeLine{20 }
\DoxyCodeLine{21     \textcolor{keyword}{static} \textcolor{keywordtype}{bool} \mbox{\hyperlink{struct_y_a_m_l_1_1convert_3_01_px_vec2_01_4_aa88d1454d7abc7ea81640442b7a14c4e}{decode}}(\textcolor{keyword}{const} Node\& node, PxVec2\& rhs) \{}
\DoxyCodeLine{22         \textcolor{keywordflow}{if}(!node.IsSequence() || node.size() != 2) \{}
\DoxyCodeLine{23             \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{24         \}}
\DoxyCodeLine{25 }
\DoxyCodeLine{26         rhs.x = node[0].as<\textcolor{keywordtype}{float}>();}
\DoxyCodeLine{27         rhs.y = node[1].as<\textcolor{keywordtype}{float}>();}
\DoxyCodeLine{28         \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{29     \}}
\DoxyCodeLine{30 \};}
\DoxyCodeLine{31 \textcolor{keyword}{template}<>}
\DoxyCodeLine{32 \textcolor{keyword}{struct }convert<PxVec3> \{}
\DoxyCodeLine{33     \textcolor{keyword}{static} Node \mbox{\hyperlink{struct_y_a_m_l_1_1convert_3_01_px_vec3_01_4_a12408a5da7eb2e2b1c1e3d5d4a5fd409}{encode}}(\textcolor{keyword}{const} PxVec3\& rhs) \{}
\DoxyCodeLine{34         Node node;}
\DoxyCodeLine{35         node.push\_back(rhs.x);}
\DoxyCodeLine{36         node.push\_back(rhs.y);}
\DoxyCodeLine{37         node.push\_back(rhs.z);}
\DoxyCodeLine{38         \textcolor{keywordflow}{return} node;}
\DoxyCodeLine{39     \}}
\DoxyCodeLine{40 }
\DoxyCodeLine{41     \textcolor{keyword}{static} \textcolor{keywordtype}{bool} \mbox{\hyperlink{struct_y_a_m_l_1_1convert_3_01_px_vec3_01_4_a56618cbc8f62b2d58bd67bdd5cb8523d}{decode}}(\textcolor{keyword}{const} Node\& node, PxVec3\& rhs) \{}
\DoxyCodeLine{42         \textcolor{keywordflow}{if}(!node.IsSequence() || node.size() != 3) \{}
\DoxyCodeLine{43             \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{44         \}}
\DoxyCodeLine{45 }
\DoxyCodeLine{46         rhs.x = node[0].as<\textcolor{keywordtype}{float}>();}
\DoxyCodeLine{47         rhs.y = node[1].as<\textcolor{keywordtype}{float}>();}
\DoxyCodeLine{48         rhs.z = node[2].as<\textcolor{keywordtype}{float}>();}
\DoxyCodeLine{49         \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{50     \}}
\DoxyCodeLine{51 \};}
\DoxyCodeLine{52 \textcolor{keyword}{template}<>}
\DoxyCodeLine{53 \textcolor{keyword}{struct }convert<PxVec4> \{}
\DoxyCodeLine{54     \textcolor{keyword}{static} Node \mbox{\hyperlink{struct_y_a_m_l_1_1convert_3_01_px_vec4_01_4_a0d4e67db5941cd4e924a3b01a0bbba6e}{encode}}(\textcolor{keyword}{const} PxVec4\& rhs) \{}
\DoxyCodeLine{55         Node node;}
\DoxyCodeLine{56         node.push\_back(rhs.x);}
\DoxyCodeLine{57         node.push\_back(rhs.y);}
\DoxyCodeLine{58         node.push\_back(rhs.z);}
\DoxyCodeLine{59         node.push\_back(rhs.w);}
\DoxyCodeLine{60         \textcolor{keywordflow}{return} node;}
\DoxyCodeLine{61     \}}
\DoxyCodeLine{62 }
\DoxyCodeLine{63     \textcolor{keyword}{static} \textcolor{keywordtype}{bool} \mbox{\hyperlink{struct_y_a_m_l_1_1convert_3_01_px_vec4_01_4_a8b25f93061d1435ed59ed5b2eeeb92b2}{decode}}(\textcolor{keyword}{const} Node\& node, PxVec4\& rhs) \{}
\DoxyCodeLine{64         \textcolor{keywordflow}{if}(!node.IsSequence() || node.size() != 4) \{}
\DoxyCodeLine{65             \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{66         \}}
\DoxyCodeLine{67 }
\DoxyCodeLine{68         rhs.x = node[0].as<\textcolor{keywordtype}{float}>();}
\DoxyCodeLine{69         rhs.y = node[1].as<\textcolor{keywordtype}{float}>();}
\DoxyCodeLine{70         rhs.z = node[2].as<\textcolor{keywordtype}{float}>();}
\DoxyCodeLine{71         rhs.w = node[3].as<\textcolor{keywordtype}{float}>();}
\DoxyCodeLine{72         \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{73     \}}
\DoxyCodeLine{74 \};}
\DoxyCodeLine{75 \textcolor{keyword}{template}<>}
\DoxyCodeLine{76 \textcolor{keyword}{struct }convert<PxMat44> \{}
\DoxyCodeLine{77     \textcolor{keyword}{static} Node \mbox{\hyperlink{struct_y_a_m_l_1_1convert_3_01_px_mat44_01_4_a9c4b5938dc76d95e834116c738b60c79}{encode}}(\textcolor{keyword}{const} PxMat44\& rhs) \{}
\DoxyCodeLine{78         Node node;}
\DoxyCodeLine{79         node.push\_back(rhs[0]);}
\DoxyCodeLine{80         node.push\_back(rhs[1]);}
\DoxyCodeLine{81         node.push\_back(rhs[2]);}
\DoxyCodeLine{82         node.push\_back(rhs[3]);}
\DoxyCodeLine{83         \textcolor{keywordflow}{return} node;}
\DoxyCodeLine{84     \}}
\DoxyCodeLine{85 }
\DoxyCodeLine{86     \textcolor{keyword}{static} \textcolor{keywordtype}{bool} \mbox{\hyperlink{struct_y_a_m_l_1_1convert_3_01_px_mat44_01_4_a5d47e780a96e48d0a2132710652305ff}{decode}}(\textcolor{keyword}{const} Node\& node, PxMat44\& rhs) \{}
\DoxyCodeLine{87         \textcolor{keywordflow}{if}(!node.IsSequence() || node.size() != 4) \{}
\DoxyCodeLine{88             \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{89         \}}
\DoxyCodeLine{90 }
\DoxyCodeLine{91         rhs[0] = node[0].as<PxVec4>();}
\DoxyCodeLine{92         rhs[1] = node[1].as<PxVec4>();}
\DoxyCodeLine{93         rhs[2] = node[2].as<PxVec4>();}
\DoxyCodeLine{94         rhs[3] = node[3].as<PxVec4>();}
\DoxyCodeLine{95         \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{96     \}}
\DoxyCodeLine{97 \};}
\DoxyCodeLine{98 \} \textcolor{comment}{// namespace YAML}}
\DoxyCodeLine{99 }
\DoxyCodeLine{100 }
\DoxyCodeLine{101 \textcolor{keyword}{namespace }\mbox{\hyperlink{namespace_uni_engine}{UniEngine}}}
\DoxyCodeLine{102 \{}
\DoxyCodeLine{103 \textcolor{keyword}{class }RigidBody;}
\DoxyCodeLine{104 YAML::Emitter \&\mbox{\hyperlink{namespace_uni_engine_a39897c16280f9722b229d4f8bd617f64}{operator<<}}(YAML::Emitter \&out, \textcolor{keyword}{const} PxVec2 \&v);}
\DoxyCodeLine{105 YAML::Emitter \&\mbox{\hyperlink{namespace_uni_engine_a39897c16280f9722b229d4f8bd617f64}{operator<<}}(YAML::Emitter \&out, \textcolor{keyword}{const} PxVec3 \&v);}
\DoxyCodeLine{106 YAML::Emitter \&\mbox{\hyperlink{namespace_uni_engine_a39897c16280f9722b229d4f8bd617f64}{operator<<}}(YAML::Emitter \&out, \textcolor{keyword}{const} PxVec4 \&v);}
\DoxyCodeLine{107 YAML::Emitter \&\mbox{\hyperlink{namespace_uni_engine_a39897c16280f9722b229d4f8bd617f64}{operator<<}}(YAML::Emitter \&out, \textcolor{keyword}{const} PxMat44 \&v);}
\DoxyCodeLine{108 }
\DoxyCodeLine{109 \textcolor{keyword}{class }UNIENGINE\_API \mbox{\hyperlink{class_uni_engine_1_1_physics_scene}{PhysicsScene}};}
\DoxyCodeLine{110 \textcolor{keyword}{class }UNIENGINE\_API \mbox{\hyperlink{class_uni_engine_1_1_physics_manager}{PhysicsManager}} : \textcolor{keyword}{public} \mbox{\hyperlink{class_uni_engine_1_1_i_singleton}{ISingleton}}<PhysicsManager>}
\DoxyCodeLine{111 \{}
\DoxyCodeLine{112     PxPvdTransport *m\_pvdTransport;}
\DoxyCodeLine{113     PxDefaultAllocator m\_allocator;}
\DoxyCodeLine{114     PxDefaultErrorCallback m\_errorCallback;}
\DoxyCodeLine{115     PxFoundation *m\_physicsFoundation;}
\DoxyCodeLine{116     PxPhysics *m\_physics;}
\DoxyCodeLine{117     PxDefaultCpuDispatcher *m\_dispatcher;}
\DoxyCodeLine{118     PxPvd *m\_physVisDebugger;}
\DoxyCodeLine{119 }
\DoxyCodeLine{120     std::vector<std::weak\_ptr<PhysicsScene>> m\_scenes;}
\DoxyCodeLine{121 }
\DoxyCodeLine{122     \textcolor{keyword}{friend} \textcolor{keyword}{class }\mbox{\hyperlink{class_uni_engine_1_1_rigid_body}{RigidBody}};}
\DoxyCodeLine{123     \textcolor{keyword}{friend} \textcolor{keyword}{class }\mbox{\hyperlink{class_uni_engine_1_1_joint}{Joint}};}
\DoxyCodeLine{124     \textcolor{keyword}{friend} \textcolor{keyword}{class }Articulation;}
\DoxyCodeLine{125     \textcolor{keyword}{friend} \textcolor{keyword}{class }\mbox{\hyperlink{class_uni_engine_1_1_physics_scene}{PhysicsScene}};}
\DoxyCodeLine{126     \textcolor{keyword}{friend} \textcolor{keyword}{class }\mbox{\hyperlink{class_uni_engine_1_1_physics_system}{PhysicsSystem}};}
\DoxyCodeLine{127     \textcolor{keyword}{friend} \textcolor{keyword}{class }\mbox{\hyperlink{class_uni_engine_1_1_physics_material}{PhysicsMaterial}};}
\DoxyCodeLine{128     \textcolor{keyword}{friend} \textcolor{keyword}{class }\mbox{\hyperlink{class_uni_engine_1_1_collider}{Collider}};}
\DoxyCodeLine{129     \textcolor{keyword}{static} \textcolor{keywordtype}{void} UploadRigidBodyShapes(\textcolor{keyword}{const} std::shared\_ptr<PhysicsScene>\& scene, \textcolor{keyword}{const} std::vector<Entity> *rigidBodyEntities);}
\DoxyCodeLine{130     \textcolor{keyword}{static} \textcolor{keywordtype}{void} UploadJointLinks(\textcolor{keyword}{const} std::shared\_ptr<PhysicsScene>\& scene, \textcolor{keyword}{const} std::vector<Entity> *jointEntities);}
\DoxyCodeLine{131   \textcolor{keyword}{public}:}
\DoxyCodeLine{132     \textcolor{keyword}{static} \textcolor{keywordtype}{void} UploadTransforms(\textcolor{keyword}{const} \textcolor{keywordtype}{bool}\& updateAll, \textcolor{keyword}{const} \textcolor{keywordtype}{bool}\& freeze = \textcolor{keyword}{false});}
\DoxyCodeLine{133     \textcolor{keyword}{static} \textcolor{keywordtype}{void} UploadRigidBodyShapes();}
\DoxyCodeLine{134     \textcolor{keyword}{static} \textcolor{keywordtype}{void} UploadJointLinks();}
\DoxyCodeLine{135     \textcolor{keyword}{static} \textcolor{keywordtype}{void} UploadTransform(\textcolor{keyword}{const} \mbox{\hyperlink{struct_uni_engine_1_1_global_transform}{GlobalTransform}} \&globalTransform, \textcolor{keyword}{const} std::shared\_ptr<RigidBody> \&rigidBody);}
\DoxyCodeLine{136     \textcolor{keyword}{static} \textcolor{keywordtype}{void} PreUpdate();}
\DoxyCodeLine{137     \textcolor{keyword}{static} \textcolor{keywordtype}{void} Init();}
\DoxyCodeLine{138     \textcolor{keyword}{static} \textcolor{keywordtype}{void} Destroy();}
\DoxyCodeLine{139 \};}
\DoxyCodeLine{140 }
\DoxyCodeLine{141 \textcolor{keyword}{class }UNIENGINE\_API \mbox{\hyperlink{class_uni_engine_1_1_physics_scene}{PhysicsScene}}\{}
\DoxyCodeLine{142     PxScene *m\_physicsScene = \textcolor{keyword}{nullptr};}
\DoxyCodeLine{143     \textcolor{keyword}{friend} \textcolor{keyword}{class }\mbox{\hyperlink{class_uni_engine_1_1_physics_system}{PhysicsSystem}};}
\DoxyCodeLine{144     \textcolor{keyword}{friend} \textcolor{keyword}{class }\mbox{\hyperlink{class_uni_engine_1_1_physics_manager}{PhysicsManager}};}
\DoxyCodeLine{145   \textcolor{keyword}{public}:}
\DoxyCodeLine{146     \textcolor{keywordtype}{void} Simulate(\textcolor{keywordtype}{float} time) \textcolor{keyword}{const};}
\DoxyCodeLine{147     \mbox{\hyperlink{namespace_uni_engine_a57d423095907f01a15d243072b290e8a}{PhysicsScene}}();}
\DoxyCodeLine{148     \mbox{\hyperlink{class_uni_engine_1_1_physics_scene}{\string~PhysicsScene}}();}
\DoxyCodeLine{149 \};}
\DoxyCodeLine{150 \textcolor{keyword}{class }UNIENGINE\_API \mbox{\hyperlink{class_uni_engine_1_1_physics_system}{PhysicsSystem}} : \textcolor{keyword}{public} \mbox{\hyperlink{class_uni_engine_1_1_i_system}{ISystem}}}
\DoxyCodeLine{151 \{}
\DoxyCodeLine{152     std::shared\_ptr<PhysicsScene> m\_scene;}
\DoxyCodeLine{153 }
\DoxyCodeLine{154     \textcolor{keywordtype}{void} DownloadRigidBodyTransforms(\textcolor{keyword}{const} std::vector<Entity> *rigidBodyEntities) \textcolor{keyword}{const};}
\DoxyCodeLine{155   \textcolor{keyword}{public}:}
\DoxyCodeLine{156     \textcolor{keywordtype}{void} DownloadRigidBodyTransforms() \textcolor{keyword}{const};}
\DoxyCodeLine{157     \textcolor{keywordtype}{void} OnEnable();}
\DoxyCodeLine{158     \textcolor{keywordtype}{void} OnCreate() \textcolor{keyword}{override};}
\DoxyCodeLine{159     \textcolor{keywordtype}{void} OnDestroy() \textcolor{keyword}{override};}
\DoxyCodeLine{160     \textcolor{keywordtype}{void} FixedUpdate() \textcolor{keyword}{override};}
\DoxyCodeLine{161     \textcolor{keywordtype}{void} Simulate(\textcolor{keywordtype}{float} time) \textcolor{keyword}{const};}
\DoxyCodeLine{162 \};}
\DoxyCodeLine{163 \} \textcolor{comment}{// namespace UniEngine}}

\end{DoxyCode}
