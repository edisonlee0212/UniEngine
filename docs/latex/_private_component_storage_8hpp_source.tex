\hypertarget{_private_component_storage_8hpp_source}{}\doxysection{Private\+Component\+Storage.\+hpp}
\label{_private_component_storage_8hpp_source}\index{C:/Users/lllll/Documents/GitHub/UniEngine/include/lib/Engine/ECS/PrivateComponentStorage.hpp@{C:/Users/lllll/Documents/GitHub/UniEngine/include/lib/Engine/ECS/PrivateComponentStorage.hpp}}
\mbox{\hyperlink{_private_component_storage_8hpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{preprocessor}{\#pragma once}}
\DoxyCodeLine{2 \textcolor{preprocessor}{\#include <\mbox{\hyperlink{_entity_8hpp}{Entity.hpp}}>}}
\DoxyCodeLine{3 \textcolor{keyword}{namespace }\mbox{\hyperlink{namespace_uni_engine}{UniEngine}}}
\DoxyCodeLine{4 \{}
\DoxyCodeLine{5 \textcolor{keyword}{struct }\mbox{\hyperlink{struct_uni_engine_1_1_p_owners_collection}{POwnersCollection}}}
\DoxyCodeLine{6 \{}
\DoxyCodeLine{7     std::unordered\_map<Entity, size\_t, Entity> \mbox{\hyperlink{struct_uni_engine_1_1_p_owners_collection_adcd746117a692fa8e04ac940a55c1665}{m\_ownersMap}};}
\DoxyCodeLine{8     std::vector<Entity> \mbox{\hyperlink{struct_uni_engine_1_1_p_owners_collection_a073443c56541a4827cbaea5045b0375f}{m\_ownersList}};}
\DoxyCodeLine{9     \mbox{\hyperlink{struct_uni_engine_1_1_p_owners_collection_af4c008ce68c06406a3aba4b003b21a8f}{POwnersCollection}}()}
\DoxyCodeLine{10     \{}
\DoxyCodeLine{11         \mbox{\hyperlink{struct_uni_engine_1_1_p_owners_collection_a073443c56541a4827cbaea5045b0375f}{m\_ownersList}} = std::vector<Entity>();}
\DoxyCodeLine{12         \mbox{\hyperlink{struct_uni_engine_1_1_p_owners_collection_adcd746117a692fa8e04ac940a55c1665}{m\_ownersMap}} = std::unordered\_map<Entity, size\_t, Entity>();}
\DoxyCodeLine{13     \}}
\DoxyCodeLine{14 \};}
\DoxyCodeLine{15 \textcolor{keyword}{class }\mbox{\hyperlink{class_uni_engine_1_1_private_component_storage}{PrivateComponentStorage}}}
\DoxyCodeLine{16 \{}
\DoxyCodeLine{17     std::unordered\_map<std::size\_t, size\_t> m\_pOwnersCollectionsMap;}
\DoxyCodeLine{18     std::vector<std::pair<size\_t, POwnersCollection>> m\_pOwnersCollectionsList;}
\DoxyCodeLine{19 }
\DoxyCodeLine{20   \textcolor{keyword}{public}:}
\DoxyCodeLine{21     UNIENGINE\_API \textcolor{keywordtype}{void} \mbox{\hyperlink{class_uni_engine_1_1_private_component_storage_a23d635003b12a2b1c2054ca848f17aa6}{RemovePrivateComponent}}(\mbox{\hyperlink{struct_uni_engine_1_1_entity}{Entity}} entity, \textcolor{keywordtype}{size\_t} typeID);}
\DoxyCodeLine{22     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_uni_engine_1_1_private_component_storage_affb0036e7ae56192e413500e1789befe}{DeleteEntity}}(\mbox{\hyperlink{struct_uni_engine_1_1_entity}{Entity}} entity);}
\DoxyCodeLine{23     \textcolor{keyword}{template} <\textcolor{keyword}{typename} T = IPrivateComponent> \textcolor{keywordtype}{void} \mbox{\hyperlink{class_uni_engine_1_1_private_component_storage_a02f1e50cbae96891435710f9c6944bb3}{SetPrivateComponent}}(\mbox{\hyperlink{struct_uni_engine_1_1_entity}{Entity}} entity);}
\DoxyCodeLine{24     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_uni_engine_1_1_private_component_storage_a02f1e50cbae96891435710f9c6944bb3}{SetPrivateComponent}}(\mbox{\hyperlink{struct_uni_engine_1_1_entity}{Entity}} entity, \textcolor{keywordtype}{size\_t} \textcolor{keywordtype}{id});}
\DoxyCodeLine{25     \textcolor{keyword}{template} <\textcolor{keyword}{typename} T = IPrivateComponent> \textcolor{keywordtype}{void} \mbox{\hyperlink{class_uni_engine_1_1_private_component_storage_a23d635003b12a2b1c2054ca848f17aa6}{RemovePrivateComponent}}(\mbox{\hyperlink{struct_uni_engine_1_1_entity}{Entity}} entity);}
\DoxyCodeLine{26     \textcolor{keyword}{template} <\textcolor{keyword}{typename} T> \textcolor{keyword}{const} std::vector<Entity> *\mbox{\hyperlink{class_uni_engine_1_1_private_component_storage_ab672baa47352d1f88088a61e14861978}{UnsafeGetOwnersList}}();}
\DoxyCodeLine{27     \textcolor{keyword}{template} <\textcolor{keyword}{typename} T> \textcolor{keyword}{const} std::vector<Entity> \mbox{\hyperlink{class_uni_engine_1_1_private_component_storage_a7fcc5fbaa5f6dc2b0d2ade276a2e828d}{GetOwnersList}}();}
\DoxyCodeLine{28 \};}
\DoxyCodeLine{29 }
\DoxyCodeLine{30 \textcolor{keyword}{template} <\textcolor{keyword}{typename} T> \textcolor{keywordtype}{void} \mbox{\hyperlink{class_uni_engine_1_1_private_component_storage_a02f1e50cbae96891435710f9c6944bb3}{PrivateComponentStorage::SetPrivateComponent}}(\mbox{\hyperlink{struct_uni_engine_1_1_entity}{Entity}} entity)}
\DoxyCodeLine{31 \{}
\DoxyCodeLine{32     \textcolor{keywordtype}{size\_t} \textcolor{keywordtype}{id} = \textcolor{keyword}{typeid}(T).hash\_code();}
\DoxyCodeLine{33     \textcolor{keyword}{auto} search = m\_pOwnersCollectionsMap.find(\textcolor{keywordtype}{id});}
\DoxyCodeLine{34     \textcolor{keywordflow}{if} (search != m\_pOwnersCollectionsMap.end())}
\DoxyCodeLine{35     \{}
\DoxyCodeLine{36         \textcolor{keyword}{const} \textcolor{keyword}{auto} insearch = m\_pOwnersCollectionsList[search-\/>second].second.m\_ownersMap.find(entity);}
\DoxyCodeLine{37         \textcolor{keywordflow}{if} (insearch == m\_pOwnersCollectionsList[search-\/>second].second.m\_ownersMap.end())}
\DoxyCodeLine{38         \{}
\DoxyCodeLine{39             m\_pOwnersCollectionsList[search-\/>second].second.m\_ownersMap.insert(}
\DoxyCodeLine{40                 \{entity, m\_pOwnersCollectionsList[search-\/>second].second.m\_ownersList.size()\});}
\DoxyCodeLine{41             m\_pOwnersCollectionsList[search-\/>second].second.m\_ownersList.push\_back(entity);}
\DoxyCodeLine{42         \}}
\DoxyCodeLine{43     \}}
\DoxyCodeLine{44     \textcolor{keywordflow}{else}}
\DoxyCodeLine{45     \{}
\DoxyCodeLine{46         \mbox{\hyperlink{struct_uni_engine_1_1_p_owners_collection}{POwnersCollection}} collection;}
\DoxyCodeLine{47         collection.\mbox{\hyperlink{struct_uni_engine_1_1_p_owners_collection_adcd746117a692fa8e04ac940a55c1665}{m\_ownersMap}}.insert(\{entity, 0\});}
\DoxyCodeLine{48         collection.\mbox{\hyperlink{struct_uni_engine_1_1_p_owners_collection_a073443c56541a4827cbaea5045b0375f}{m\_ownersList}}.push\_back(entity);}
\DoxyCodeLine{49         m\_pOwnersCollectionsMap.insert(\{id, m\_pOwnersCollectionsList.size()\});}
\DoxyCodeLine{50         m\_pOwnersCollectionsList.push\_back(std::make\_pair(\textcolor{keywordtype}{id}, std::move(collection)));}
\DoxyCodeLine{51     \}}
\DoxyCodeLine{52 \}}
\DoxyCodeLine{53 }
\DoxyCodeLine{54 \textcolor{keyword}{template} <\textcolor{keyword}{typename} T> \textcolor{keywordtype}{void} \mbox{\hyperlink{class_uni_engine_1_1_private_component_storage_a23d635003b12a2b1c2054ca848f17aa6}{PrivateComponentStorage::RemovePrivateComponent}}(\mbox{\hyperlink{struct_uni_engine_1_1_entity}{Entity}} entity)}
\DoxyCodeLine{55 \{}
\DoxyCodeLine{56     \mbox{\hyperlink{class_uni_engine_1_1_private_component_storage_a23d635003b12a2b1c2054ca848f17aa6}{RemovePrivateComponent}}(entity, \textcolor{keyword}{typeid}(T).hash\_code());}
\DoxyCodeLine{57 \}}
\DoxyCodeLine{58 }
\DoxyCodeLine{59 \textcolor{keyword}{template} <\textcolor{keyword}{typename} T> \textcolor{keyword}{const} std::vector<Entity> *\mbox{\hyperlink{class_uni_engine_1_1_private_component_storage_ab672baa47352d1f88088a61e14861978}{PrivateComponentStorage::UnsafeGetOwnersList}}()}
\DoxyCodeLine{60 \{}
\DoxyCodeLine{61     \textcolor{keyword}{auto} search = m\_pOwnersCollectionsMap.find(\textcolor{keyword}{typeid}(T).hash\_code());}
\DoxyCodeLine{62     \textcolor{keywordflow}{if} (search != m\_pOwnersCollectionsMap.end())}
\DoxyCodeLine{63     \{}
\DoxyCodeLine{64         \textcolor{keywordflow}{return} \&m\_pOwnersCollectionsList[search-\/>second].second.m\_ownersList;}
\DoxyCodeLine{65     \}}
\DoxyCodeLine{66     \textcolor{keywordflow}{return} \textcolor{keyword}{nullptr};}
\DoxyCodeLine{67 \}}
\DoxyCodeLine{68 \} \textcolor{comment}{// namespace UniEngine}}

\end{DoxyCode}
