\hypertarget{_project_manager_8hpp_source}{}\doxysection{Project\+Manager.\+hpp}
\label{_project_manager_8hpp_source}\index{C:/Users/lllll/Documents/GitHub/UniEngine/include/lib/Engine/Managers/ProjectManager.hpp@{C:/Users/lllll/Documents/GitHub/UniEngine/include/lib/Engine/Managers/ProjectManager.hpp}}
\mbox{\hyperlink{_project_manager_8hpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{preprocessor}{\#pragma once}}
\DoxyCodeLine{2 \textcolor{preprocessor}{\#include <\mbox{\hyperlink{_i_asset_8hpp}{IAsset.hpp}}>}}
\DoxyCodeLine{3 \textcolor{preprocessor}{\#include <\mbox{\hyperlink{_i_singleton_8hpp}{ISingleton.hpp}}>}}
\DoxyCodeLine{4 }
\DoxyCodeLine{5 \textcolor{keyword}{namespace }\mbox{\hyperlink{namespace_uni_engine}{UniEngine}}}
\DoxyCodeLine{6 \{}
\DoxyCodeLine{7 }
\DoxyCodeLine{8 \textcolor{keyword}{struct }UNIENGINE\_API \mbox{\hyperlink{struct_uni_engine_1_1_file_record}{FileRecord}}}
\DoxyCodeLine{9 \{}
\DoxyCodeLine{10     std::string m\_name = \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{11     std::filesystem::path m\_relativeFilePath = \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{12     std::string m\_fileName = \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{13     std::string m\_typeName = \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{14     \textcolor{keywordtype}{void} Serialize(YAML::Emitter \&out) \textcolor{keyword}{const};}
\DoxyCodeLine{15     \textcolor{keywordtype}{void} Deserialize(\textcolor{keyword}{const} YAML::Node \&in);}
\DoxyCodeLine{16 \};}
\DoxyCodeLine{17 }
\DoxyCodeLine{18 \textcolor{keyword}{struct }UNIENGINE\_API \mbox{\hyperlink{struct_uni_engine_1_1_folder_metadata}{FolderMetadata}}\{}
\DoxyCodeLine{19     \textcolor{keyword}{friend} \textcolor{keyword}{class }\mbox{\hyperlink{class_uni_engine_1_1_editor_manager}{EditorManager}};}
\DoxyCodeLine{20     std::unordered\_map<Handle, FileRecord> \mbox{\hyperlink{struct_uni_engine_1_1_folder_metadata_a4917d3cb86f372e1e73f9161ca5718e3}{m\_fileRecords}};}
\DoxyCodeLine{21     std::map<std::string, Handle> \mbox{\hyperlink{struct_uni_engine_1_1_folder_metadata_a66f594c684a9b2e6bf37e740ca1d8985}{m\_fileMap}};}
\DoxyCodeLine{22     \textcolor{keywordtype}{void} Save(\textcolor{keyword}{const} std::filesystem::path \&path);}
\DoxyCodeLine{23     \textcolor{keywordtype}{bool} Load(\textcolor{keyword}{const} std::filesystem::path \&path);}
\DoxyCodeLine{24 \};}
\DoxyCodeLine{25 }
\DoxyCodeLine{26 \textcolor{keyword}{class }UNIENGINE\_API \mbox{\hyperlink{class_uni_engine_1_1_asset_registry}{AssetRegistry}}}
\DoxyCodeLine{27 \{}
\DoxyCodeLine{28     std::unordered\_map<Handle, FileRecord> m\_assetRecords;}
\DoxyCodeLine{29     std::unordered\_map<std::string, Handle> m\_fileMap;}
\DoxyCodeLine{30   \textcolor{keyword}{public}:}
\DoxyCodeLine{31     \textcolor{keywordtype}{void} ResetFilePath(\mbox{\hyperlink{struct_uni_engine_1_1_handle}{Handle}} handle, \textcolor{keyword}{const} std::filesystem::path \&newFilePath);}
\DoxyCodeLine{32     \textcolor{keywordtype}{void} AddOrResetFile(\mbox{\hyperlink{struct_uni_engine_1_1_handle}{Handle}} handle, \textcolor{keyword}{const} \mbox{\hyperlink{struct_uni_engine_1_1_file_record}{FileRecord}} \&newFileRecord);}
\DoxyCodeLine{33     \textcolor{keywordtype}{void} RemoveFile(\mbox{\hyperlink{struct_uni_engine_1_1_handle}{Handle}} handle);}
\DoxyCodeLine{34     \textcolor{keywordtype}{bool} Find(\mbox{\hyperlink{struct_uni_engine_1_1_handle}{Handle}} handle, \mbox{\hyperlink{struct_uni_engine_1_1_file_record}{FileRecord}}\& target);}
\DoxyCodeLine{35     \textcolor{keywordtype}{bool} Find(\textcolor{keyword}{const} std::filesystem::path \&newRelativePath, \mbox{\hyperlink{struct_uni_engine_1_1_handle}{Handle}}\& handle);}
\DoxyCodeLine{36     \textcolor{keywordtype}{bool} Find(\textcolor{keyword}{const} std::filesystem::path \&newRelativePath);}
\DoxyCodeLine{37     \textcolor{keywordtype}{void} Clear();}
\DoxyCodeLine{38 \};}
\DoxyCodeLine{39 }
\DoxyCodeLine{40 \textcolor{keyword}{struct }UNIENGINE\_API \mbox{\hyperlink{struct_uni_engine_1_1_folder}{Folder}} \{}
\DoxyCodeLine{41     std::filesystem::path \mbox{\hyperlink{struct_uni_engine_1_1_folder_a3389aa1ecb76cbb9bd68dab175c469c1}{m\_relativePath}};}
\DoxyCodeLine{42     std::string \mbox{\hyperlink{struct_uni_engine_1_1_folder_a668733d6f3856107f39eb72a9579afa0}{m\_name}};}
\DoxyCodeLine{43     \mbox{\hyperlink{struct_uni_engine_1_1_folder_metadata}{FolderMetadata}} \mbox{\hyperlink{struct_uni_engine_1_1_folder_a6a1945428728d4a9a8710934369206dd}{m\_folderMetadata}};}
\DoxyCodeLine{44     std::map<std::string, std::shared\_ptr<Folder>> \mbox{\hyperlink{struct_uni_engine_1_1_folder_ad8011aa12b827cac5e774d236c49060a}{m\_children}};}
\DoxyCodeLine{45     std::weak\_ptr<Folder> \mbox{\hyperlink{struct_uni_engine_1_1_folder_adecd840afd8d629bda6720c9367733b0}{m\_parent}};}
\DoxyCodeLine{46     \textcolor{keywordtype}{void} Rename(\textcolor{keyword}{const} std::string\& newName);}
\DoxyCodeLine{47     \textcolor{keywordtype}{void} ClearAllDescendents();}
\DoxyCodeLine{48 \};}
\DoxyCodeLine{49 }
\DoxyCodeLine{50 \textcolor{keyword}{class }UNIENGINE\_API \mbox{\hyperlink{class_uni_engine_1_1_project}{Project}} : \textcolor{keyword}{public} \mbox{\hyperlink{class_uni_engine_1_1_i_serializable}{ISerializable}}}
\DoxyCodeLine{51 \{}
\DoxyCodeLine{52   \textcolor{keyword}{public}:}
\DoxyCodeLine{53     std::shared\_ptr<Folder> \mbox{\hyperlink{class_uni_engine_1_1_project_a942b90fbaed1593a741dfc54338dda9a}{m\_projectFolder}};}
\DoxyCodeLine{54     std::filesystem::path \mbox{\hyperlink{class_uni_engine_1_1_project_a9fb62885dd0f480cd91af088913ee754}{m\_startScenePath}};}
\DoxyCodeLine{55     \textcolor{keywordtype}{void} Serialize(YAML::Emitter \&out) \textcolor{keyword}{override};}
\DoxyCodeLine{56     \textcolor{keywordtype}{void} Deserialize(\textcolor{keyword}{const} YAML::Node \&in) \textcolor{keyword}{override};}
\DoxyCodeLine{57 }
\DoxyCodeLine{58 \};}
\DoxyCodeLine{59 }
\DoxyCodeLine{60 \textcolor{keyword}{class }UNIENGINE\_API \mbox{\hyperlink{class_uni_engine_1_1_project_manager}{ProjectManager}} : \textcolor{keyword}{public} \mbox{\hyperlink{class_uni_engine_1_1_i_singleton}{ISingleton}}<ProjectManager>}
\DoxyCodeLine{61 \{}
\DoxyCodeLine{62     \textcolor{keyword}{friend} \textcolor{keyword}{class }\mbox{\hyperlink{class_uni_engine_1_1_asset_manager}{AssetManager}};}
\DoxyCodeLine{63     \textcolor{keyword}{friend} \textcolor{keyword}{class }\mbox{\hyperlink{class_uni_engine_1_1_editor_manager}{EditorManager}};}
\DoxyCodeLine{64     std::filesystem::path m\_projectPath;}
\DoxyCodeLine{65     std::shared\_ptr<Project> m\_currentProject;}
\DoxyCodeLine{66     std::optional<std::function<void()>> m\_newSceneCustomizer;}
\DoxyCodeLine{67     std::shared\_ptr<Folder> m\_currentFocusedFolder;}
\DoxyCodeLine{68 }
\DoxyCodeLine{69     \textcolor{keyword}{static} \textcolor{keywordtype}{void} GenerateNewDefaultScene();}
\DoxyCodeLine{70     \textcolor{keyword}{static} std::filesystem::path GenerateNewPath(\textcolor{keyword}{const} std::string \&filestem, \textcolor{keyword}{const} std::string \&extension);}
\DoxyCodeLine{71     \textcolor{keyword}{static} \textcolor{keywordtype}{void} ScanFolderHelper(\textcolor{keyword}{const} std::filesystem::path\& folderPath, \textcolor{keyword}{const} std::shared\_ptr<Folder>\& folder, \textcolor{keywordtype}{bool} updateMetaData = \textcolor{keyword}{true});}
\DoxyCodeLine{72 }
\DoxyCodeLine{73 }
\DoxyCodeLine{74     \textcolor{keyword}{static} \textcolor{keywordtype}{void} FindFolderHelper(\textcolor{keyword}{const} std::filesystem::path\& folderPath, \textcolor{keyword}{const} std::shared\_ptr<Folder>\& walker, std::shared\_ptr<Folder>\& result);}
\DoxyCodeLine{75   \textcolor{keyword}{public}:}
\DoxyCodeLine{81     \textcolor{keyword}{static} std::shared\_ptr<Folder> FindFolder(\textcolor{keyword}{const} std::filesystem::path\& folderPath);}
\DoxyCodeLine{82 }
\DoxyCodeLine{83     \textcolor{keyword}{static} \textcolor{keywordtype}{void} UpdateFolderMetadata(\textcolor{keyword}{const} std::shared\_ptr<Folder>\& folder);}
\DoxyCodeLine{84 }
\DoxyCodeLine{85     \textcolor{keyword}{static} \textcolor{keywordtype}{bool} IsInProjectFolder(\textcolor{keyword}{const} std::filesystem::path \&target);}
\DoxyCodeLine{86     \textcolor{keyword}{static} std::filesystem::path GetRelativePath(\textcolor{keyword}{const} std::filesystem::path \&target);}
\DoxyCodeLine{87     \textcolor{keyword}{static} \textcolor{keywordtype}{void} SetScenePostLoadActions(\textcolor{keyword}{const} std::function<\textcolor{keywordtype}{void}()> \&actions);}
\DoxyCodeLine{88 }
\DoxyCodeLine{89     \mbox{\hyperlink{class_uni_engine_1_1_asset_registry}{AssetRegistry}} \mbox{\hyperlink{class_uni_engine_1_1_project_manager_a4f0df4e18c5d9f4f3d6a94f09b0a5cab}{m\_assetRegistry}};}
\DoxyCodeLine{90     std::string m\_currentProjectName = \textcolor{stringliteral}{"{}New Project"{}};}
\DoxyCodeLine{91     \textcolor{keyword}{static} \textcolor{keywordtype}{void} Init(\textcolor{keyword}{const} std::filesystem::path\& projectPath);}
\DoxyCodeLine{92     \textcolor{keyword}{static} \textcolor{keywordtype}{void} OnInspect();}
\DoxyCodeLine{93     \textcolor{keyword}{static} \textcolor{keywordtype}{void} CreateOrLoadProject(\textcolor{keyword}{const} std::filesystem::path \&path);}
\DoxyCodeLine{94     \textcolor{keyword}{static} \textcolor{keywordtype}{void} SaveProject();}
\DoxyCodeLine{95     \textcolor{keyword}{static} \textcolor{keywordtype}{void} ScanProjectFolder(\textcolor{keywordtype}{bool} updateMetadata = \textcolor{keyword}{true});}
\DoxyCodeLine{96     \textcolor{keyword}{static} std::filesystem::path GetProjectPath();}
\DoxyCodeLine{97 }
\DoxyCodeLine{98 \};}
\DoxyCodeLine{99 \} \textcolor{comment}{// namespace UniEngine}}

\end{DoxyCode}
