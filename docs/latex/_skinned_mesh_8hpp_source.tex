\hypertarget{_skinned_mesh_8hpp_source}{}\doxysection{Skinned\+Mesh.\+hpp}
\label{_skinned_mesh_8hpp_source}\index{C:/Users/lllll/Documents/GitHub/UniEngine/include/lib/Engine/Rendering/SkinnedMesh.hpp@{C:/Users/lllll/Documents/GitHub/UniEngine/include/lib/Engine/Rendering/SkinnedMesh.hpp}}
\mbox{\hyperlink{_skinned_mesh_8hpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{preprocessor}{\#pragma once}}
\DoxyCodeLine{2 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_default_resources_8hpp}{DefaultResources.hpp}}"{}}}
\DoxyCodeLine{3 }
\DoxyCodeLine{4 \textcolor{preprocessor}{\#include <\mbox{\hyperlink{_animator_8hpp}{Animator.hpp}}>}}
\DoxyCodeLine{5 \textcolor{preprocessor}{\#include <\mbox{\hyperlink{_open_g_l_utils_8hpp}{Core/OpenGLUtils.hpp}}>}}
\DoxyCodeLine{6 \textcolor{preprocessor}{\#include <\mbox{\hyperlink{_scene_8hpp}{Scene.hpp}}>}}
\DoxyCodeLine{7 \textcolor{preprocessor}{\#include <\mbox{\hyperlink{_transform_8hpp}{Transform.hpp}}>}}
\DoxyCodeLine{8 \textcolor{preprocessor}{\#include <uniengine\_export.h>}}
\DoxyCodeLine{9 \textcolor{keyword}{namespace }\mbox{\hyperlink{namespace_uni_engine}{UniEngine}}}
\DoxyCodeLine{10 \{}
\DoxyCodeLine{11 \textcolor{keyword}{struct }UNIENGINE\_API \mbox{\hyperlink{struct_uni_engine_1_1_skinned_vertex}{SkinnedVertex}}}
\DoxyCodeLine{12 \{}
\DoxyCodeLine{13     glm::vec3 \mbox{\hyperlink{struct_uni_engine_1_1_skinned_vertex_aa035c8133a6a8efc2e615e0988df64d4}{m\_position}};}
\DoxyCodeLine{14     glm::vec3 \mbox{\hyperlink{struct_uni_engine_1_1_skinned_vertex_a8de189e8d149820eae9f8c43e1a132f6}{m\_normal}};}
\DoxyCodeLine{15     glm::vec3 \mbox{\hyperlink{struct_uni_engine_1_1_skinned_vertex_aed63f81461afdaef62b4075ce7e30cb2}{m\_tangent}};}
\DoxyCodeLine{16     glm::vec4 \mbox{\hyperlink{struct_uni_engine_1_1_skinned_vertex_a00b2844dbde565622dcc075f52d81231}{m\_color}};}
\DoxyCodeLine{17     glm::vec2 \mbox{\hyperlink{struct_uni_engine_1_1_skinned_vertex_a55b22572bace73a0373b5c76ba2d0b05}{m\_texCoords}};}
\DoxyCodeLine{18 }
\DoxyCodeLine{19     glm::ivec4 \mbox{\hyperlink{struct_uni_engine_1_1_skinned_vertex_a244105a65e5ec887abdff9d2a0769ee4}{m\_bondId}};}
\DoxyCodeLine{20     glm::vec4 \mbox{\hyperlink{struct_uni_engine_1_1_skinned_vertex_ac39f7a8874691031ab7db193ebc0ea17}{m\_weight}};}
\DoxyCodeLine{21     glm::ivec4 \mbox{\hyperlink{struct_uni_engine_1_1_skinned_vertex_afe157de8cb1ee6403209af6825dcd172}{m\_bondId2}};}
\DoxyCodeLine{22     glm::vec4 \mbox{\hyperlink{struct_uni_engine_1_1_skinned_vertex_a4d70102c71cf8755f443286b1f6e4195}{m\_weight2}};}
\DoxyCodeLine{23 \};}
\DoxyCodeLine{24 }
\DoxyCodeLine{25 \textcolor{keyword}{class }UNIENGINE\_API \mbox{\hyperlink{class_uni_engine_1_1_skinned_mesh}{SkinnedMesh}} : \textcolor{keyword}{public} \mbox{\hyperlink{class_uni_engine_1_1_i_asset}{IAsset}}}
\DoxyCodeLine{26 \{}
\DoxyCodeLine{27     \textcolor{keyword}{static} std::unique\_ptr<OpenGLUtils::GLVBO> m\_matricesBuffer;}
\DoxyCodeLine{28 }
\DoxyCodeLine{29     std::shared\_ptr<OpenGLUtils::GLVAO> m\_vao;}
\DoxyCodeLine{30     \textcolor{keywordtype}{size\_t} m\_offset = 0;}
\DoxyCodeLine{31 }
\DoxyCodeLine{32     \textcolor{keywordtype}{unsigned} m\_mask = 0;}
\DoxyCodeLine{33     \mbox{\hyperlink{struct_uni_engine_1_1_bound}{Bound}} m\_bound;}
\DoxyCodeLine{34     \textcolor{keyword}{friend} \textcolor{keyword}{class }\mbox{\hyperlink{class_uni_engine_1_1_skinned_mesh_renderer}{SkinnedMeshRenderer}};}
\DoxyCodeLine{35     \textcolor{keyword}{friend} \textcolor{keyword}{class }\mbox{\hyperlink{class_uni_engine_1_1_particles}{Particles}};}
\DoxyCodeLine{36     \textcolor{keyword}{friend} \textcolor{keyword}{class }\mbox{\hyperlink{class_uni_engine_1_1_render_manager}{RenderManager}};}
\DoxyCodeLine{37     \textcolor{keyword}{friend} \textcolor{keyword}{class }\mbox{\hyperlink{class_uni_engine_1_1_editor_manager}{EditorManager}};}
\DoxyCodeLine{38     \textcolor{keywordtype}{size\_t} m\_version = 0;}
\DoxyCodeLine{39     std::vector<SkinnedVertex> m\_skinnedVertices;}
\DoxyCodeLine{40     std::vector<glm::uvec3> m\_triangles;}
\DoxyCodeLine{41     \textcolor{keyword}{friend} \textcolor{keyword}{class }\mbox{\hyperlink{class_uni_engine_1_1_asset_manager}{AssetManager}};}
\DoxyCodeLine{42     \textcolor{keyword}{friend} \textcolor{keyword}{struct }SkinnedMeshBonesBlock;}
\DoxyCodeLine{43     \textcolor{keyword}{static} std::unique\_ptr<OpenGLUtils::GLSSBO> m\_skinnedMeshBonesUniformBufferBlock;}
\DoxyCodeLine{44 }
\DoxyCodeLine{45     \textcolor{comment}{//Don't serialize.}}
\DoxyCodeLine{46     std::vector<std::shared\_ptr<Bone>> m\_bones;}
\DoxyCodeLine{47     \textcolor{keyword}{friend} \textcolor{keyword}{class }\mbox{\hyperlink{class_uni_engine_1_1_prefab}{Prefab}};}
\DoxyCodeLine{48   \textcolor{keyword}{protected}:}
\DoxyCodeLine{49     \textcolor{keywordtype}{bool} SaveInternal(\textcolor{keyword}{const} std::filesystem::path \&path) \textcolor{keyword}{override};}
\DoxyCodeLine{50   \textcolor{keyword}{public}:}
\DoxyCodeLine{51     \textcolor{keywordtype}{void} Draw() \textcolor{keyword}{const};}
\DoxyCodeLine{52     \textcolor{keywordtype}{void} DrawInstanced(\textcolor{keyword}{const} std::vector<glm::mat4>\& matrices) \textcolor{keyword}{const};}
\DoxyCodeLine{53     \textcolor{keywordtype}{void} DrawInstanced(\textcolor{keyword}{const} std::vector<GlobalTransform>\& matrices) \textcolor{keyword}{const};}
\DoxyCodeLine{54     \textcolor{keywordtype}{void} DrawInstanced(\textcolor{keyword}{const} std::shared\_ptr<ParticleMatrices>\& matrices) \textcolor{keyword}{const};}
\DoxyCodeLine{55     \textcolor{keywordtype}{void} OnCreate() \textcolor{keyword}{override};}
\DoxyCodeLine{56     \textcolor{keywordtype}{void} FetchIndices();}
\DoxyCodeLine{57 }
\DoxyCodeLine{58     \textcolor{comment}{//Need serialize}}
\DoxyCodeLine{59     std::vector<unsigned> \mbox{\hyperlink{class_uni_engine_1_1_skinned_mesh_ae80302bc1944a7b8319cbfaf46e2d09d}{m\_boneAnimatorIndices}};}
\DoxyCodeLine{60     \textcolor{keyword}{static} \textcolor{keywordtype}{void} GenerateMatrices();}
\DoxyCodeLine{61     \textcolor{keyword}{static} \textcolor{keywordtype}{void} UploadBones(\textcolor{keyword}{const} std::vector<glm::mat4> \&matrices);}
\DoxyCodeLine{62     \textcolor{keywordtype}{void} OnInspect() \textcolor{keyword}{override};}
\DoxyCodeLine{63     [[nodiscard]] glm::vec3 GetCenter() \textcolor{keyword}{const};}
\DoxyCodeLine{64     [[nodiscard]] \mbox{\hyperlink{struct_uni_engine_1_1_bound}{Bound}} GetBound() \textcolor{keyword}{const};}
\DoxyCodeLine{65     \textcolor{keywordtype}{void} Upload();}
\DoxyCodeLine{66     \textcolor{keywordtype}{void} SetVertices(\textcolor{keyword}{const} \textcolor{keywordtype}{unsigned} \&mask, std::vector<SkinnedVertex> \&skinnedVertices, std::vector<unsigned> \&indices);}
\DoxyCodeLine{67     \textcolor{keywordtype}{void} SetVertices(\textcolor{keyword}{const} \textcolor{keywordtype}{unsigned} \&mask, std::vector<SkinnedVertex> \&skinnedVertices, std::vector<glm::uvec3> \&triangles);}
\DoxyCodeLine{68     [[nodiscard]] \textcolor{keywordtype}{size\_t} GetSkinnedVerticesAmount() \textcolor{keyword}{const};}
\DoxyCodeLine{69     [[nodiscard]] \textcolor{keywordtype}{size\_t} GetTriangleAmount() \textcolor{keyword}{const};}
\DoxyCodeLine{70     \textcolor{keywordtype}{void} RecalculateNormal();}
\DoxyCodeLine{71     \textcolor{keywordtype}{void} RecalculateTangent();}
\DoxyCodeLine{72     [[nodiscard]] std::shared\_ptr<OpenGLUtils::GLVAO> Vao() \textcolor{keyword}{const};}
\DoxyCodeLine{73     \textcolor{keywordtype}{void} Enable() \textcolor{keyword}{const};}
\DoxyCodeLine{74     [[nodiscard]] \textcolor{keywordtype}{size\_t} \&GetVersion();}
\DoxyCodeLine{75     [[nodiscard]] std::vector<SkinnedVertex> \&UnsafeGetSkinnedVertices();}
\DoxyCodeLine{76     [[nodiscard]] std::vector<glm::uvec3> \&UnsafeGetTriangles();}
\DoxyCodeLine{77 }
\DoxyCodeLine{78     \textcolor{keywordtype}{void} Serialize(YAML::Emitter \&out) \textcolor{keyword}{override};}
\DoxyCodeLine{79     \textcolor{keywordtype}{void} Deserialize(\textcolor{keyword}{const} YAML::Node \&in) \textcolor{keyword}{override};}
\DoxyCodeLine{80 \};}
\DoxyCodeLine{81 \} \textcolor{comment}{// namespace UniEngine}}

\end{DoxyCode}
