\hypertarget{_post_processing_8hpp_source}{}\doxysection{Post\+Processing.\+hpp}
\label{_post_processing_8hpp_source}\index{C:/Users/lllll/Documents/GitHub/UniEngine/include/lib/Engine/Rendering/PostProcessing.hpp@{C:/Users/lllll/Documents/GitHub/UniEngine/include/lib/Engine/Rendering/PostProcessing.hpp}}
\mbox{\hyperlink{_post_processing_8hpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{preprocessor}{\#pragma once}}
\DoxyCodeLine{2 \textcolor{preprocessor}{\#include <\mbox{\hyperlink{_camera_8hpp}{Camera.hpp}}>}}
\DoxyCodeLine{3 \textcolor{keyword}{namespace }\mbox{\hyperlink{namespace_uni_engine}{UniEngine}}}
\DoxyCodeLine{4 \{}
\DoxyCodeLine{5 \textcolor{keyword}{class }UNIENGINE\_API \mbox{\hyperlink{class_uni_engine_1_1_post_processing_layer}{PostProcessingLayer}}}
\DoxyCodeLine{6 \{}
\DoxyCodeLine{7     \textcolor{keyword}{friend} \textcolor{keyword}{class }\mbox{\hyperlink{class_uni_engine_1_1_post_processing}{PostProcessing}};}
\DoxyCodeLine{8 }
\DoxyCodeLine{9   \textcolor{keyword}{protected}:}
\DoxyCodeLine{10     std::string m\_name = \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{11 }
\DoxyCodeLine{12   \textcolor{keyword}{public}:}
\DoxyCodeLine{13     \textcolor{keywordtype}{bool} m\_enabled = \textcolor{keyword}{false};}
\DoxyCodeLine{14     \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} \mbox{\hyperlink{class_uni_engine_1_1_post_processing_layer_a94a1cce159364ef5317390a074adf04d}{ResizeResolution}}(\textcolor{keywordtype}{int} x, \textcolor{keywordtype}{int} y) = 0;}
\DoxyCodeLine{15     \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} \mbox{\hyperlink{class_uni_engine_1_1_post_processing_layer_a60a9805a905563d1bea9ecc73862853d}{Process}}(\textcolor{keyword}{const} std::shared\_ptr<Camera> \&cameraComponent, \mbox{\hyperlink{class_uni_engine_1_1_render_target}{RenderTarget}} \&renderTarget) \textcolor{keyword}{const} = 0;}
\DoxyCodeLine{16     \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} \mbox{\hyperlink{class_uni_engine_1_1_post_processing_layer_aacc22bc7d707d083454abfd6bb5a4504}{OnInspect}}(\textcolor{keyword}{const} std::shared\_ptr<Camera> \&cameraComponent) = 0;}
\DoxyCodeLine{17 \};}
\DoxyCodeLine{18 }
\DoxyCodeLine{19 \textcolor{keyword}{class }UNIENGINE\_API \mbox{\hyperlink{class_uni_engine_1_1_post_processing}{PostProcessing}} final : \textcolor{keyword}{public} \mbox{\hyperlink{class_uni_engine_1_1_i_private_component}{IPrivateComponent}}, \textcolor{keyword}{public} \mbox{\hyperlink{class_uni_engine_1_1_render_target}{RenderTarget}}}
\DoxyCodeLine{20 \{}
\DoxyCodeLine{21     std::map<std::string, std::shared\_ptr<PostProcessingLayer>> m\_layers;}
\DoxyCodeLine{22   \textcolor{keyword}{public}:}
\DoxyCodeLine{23     \mbox{\hyperlink{class_uni_engine_1_1_post_processing}{PostProcessing}}\& operator=(\textcolor{keyword}{const} \mbox{\hyperlink{class_uni_engine_1_1_post_processing}{PostProcessing}}\& source);}
\DoxyCodeLine{24     \textcolor{keyword}{template} <\textcolor{keyword}{typename} T> std::weak\_ptr<T> GetLayer();}
\DoxyCodeLine{25     \textcolor{keywordtype}{void} PushLayer(\textcolor{keyword}{const} std::shared\_ptr<PostProcessingLayer> \&layer);}
\DoxyCodeLine{26     \textcolor{keywordtype}{void} RemoveLayer(\textcolor{keyword}{const} std::string \&layerName);}
\DoxyCodeLine{27     \textcolor{keywordtype}{void} SetEnableLayer(\textcolor{keyword}{const} std::string \&layerName, \textcolor{keywordtype}{bool} enabled);}
\DoxyCodeLine{28     \textcolor{keywordtype}{void} OnCreate() \textcolor{keyword}{override};}
\DoxyCodeLine{29     \textcolor{keywordtype}{void} Process();}
\DoxyCodeLine{30     \textcolor{keywordtype}{void} ResizeResolution(\textcolor{keywordtype}{int} x, \textcolor{keywordtype}{int} y);}
\DoxyCodeLine{31     \textcolor{keywordtype}{void} OnInspect() \textcolor{keyword}{override};}
\DoxyCodeLine{32     \textcolor{keywordtype}{void} Serialize(YAML::Emitter \&out) \textcolor{keyword}{override};}
\DoxyCodeLine{33     \textcolor{keywordtype}{void} Deserialize(\textcolor{keyword}{const} YAML::Node \&in) \textcolor{keyword}{override};}
\DoxyCodeLine{34     \textcolor{keywordtype}{void} PostCloneAction(\textcolor{keyword}{const} std::shared\_ptr<IPrivateComponent>\& target) \textcolor{keyword}{override};}
\DoxyCodeLine{35 \};}
\DoxyCodeLine{36 }
\DoxyCodeLine{37 \textcolor{keyword}{template} <\textcolor{keyword}{typename} T> std::weak\_ptr<T> \mbox{\hyperlink{class_uni_engine_1_1_post_processing_a944e85ded54c8efb7ccf73fac6ecbe17}{PostProcessing::GetLayer}}()}
\DoxyCodeLine{38 \{}
\DoxyCodeLine{39     \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} \&layer : m\_layers)}
\DoxyCodeLine{40     \{}
\DoxyCodeLine{41         \textcolor{keywordflow}{if} (std::dynamic\_pointer\_cast<T>(layer.second))}
\DoxyCodeLine{42         \{}
\DoxyCodeLine{43             \textcolor{keywordflow}{return} std::weak\_ptr<T>(std::static\_pointer\_cast<T>(layer.second));}
\DoxyCodeLine{44         \}}
\DoxyCodeLine{45     \}}
\DoxyCodeLine{46     \textcolor{keywordflow}{throw} 0;}
\DoxyCodeLine{47 \}}
\DoxyCodeLine{48 }
\DoxyCodeLine{49 \textcolor{preprocessor}{\#pragma region Effects}}
\DoxyCodeLine{50 \textcolor{keyword}{class }UNIENGINE\_API \mbox{\hyperlink{class_uni_engine_1_1_bloom}{Bloom}} : \textcolor{keyword}{public} \mbox{\hyperlink{class_uni_engine_1_1_post_processing_layer}{PostProcessingLayer}}}
\DoxyCodeLine{51 \{}
\DoxyCodeLine{52     \textcolor{keyword}{friend} \textcolor{keyword}{class }\mbox{\hyperlink{class_uni_engine_1_1_default_resources}{DefaultResources}};}
\DoxyCodeLine{53 }
\DoxyCodeLine{54     std::unique\_ptr<OpenGLUtils::GLTexture2D> m\_result;}
\DoxyCodeLine{55     std::unique\_ptr<OpenGLUtils::GLTexture2D> m\_brightColor;}
\DoxyCodeLine{56     std::unique\_ptr<OpenGLUtils::GLTexture2D> m\_flatColor;}
\DoxyCodeLine{57     \textcolor{keyword}{static} std::shared\_ptr<OpenGLUtils::GLProgram> m\_separateProgram;}
\DoxyCodeLine{58     \textcolor{keyword}{static} std::shared\_ptr<OpenGLUtils::GLProgram> m\_filterProgram;}
\DoxyCodeLine{59     \textcolor{keyword}{static} std::shared\_ptr<OpenGLUtils::GLProgram> m\_combineProgram;}
\DoxyCodeLine{60 }
\DoxyCodeLine{61   \textcolor{keyword}{public}:}
\DoxyCodeLine{62     \textcolor{keywordtype}{float} m\_intensity = 1.0f;}
\DoxyCodeLine{63     \textcolor{keywordtype}{int} m\_diffusion = 8;}
\DoxyCodeLine{64     \textcolor{keywordtype}{int} m\_sampleStep = 1;}
\DoxyCodeLine{65     \mbox{\hyperlink{struct_uni_engine_1_1_bezier2_d}{Bezier2D}} \mbox{\hyperlink{class_uni_engine_1_1_bloom_a2799c7c0fbfe08d01bd1cb7b2ad4f899}{m\_graph}};}
\DoxyCodeLine{66 }
\DoxyCodeLine{67     \textcolor{keywordtype}{float} m\_threshold = 1.0f;}
\DoxyCodeLine{68     \textcolor{keywordtype}{float} m\_clamp = 0.0f;}
\DoxyCodeLine{69     \mbox{\hyperlink{class_uni_engine_1_1_bloom}{Bloom}}();}
\DoxyCodeLine{70     \textcolor{keywordtype}{void} ResizeResolution(\textcolor{keywordtype}{int} x, \textcolor{keywordtype}{int} y) \textcolor{keyword}{override};}
\DoxyCodeLine{71     \textcolor{keywordtype}{void} Process(\textcolor{keyword}{const} std::shared\_ptr<Camera> \&cameraComponent, \mbox{\hyperlink{class_uni_engine_1_1_render_target}{RenderTarget}} \&renderTarget) \textcolor{keyword}{const override};}
\DoxyCodeLine{72     \textcolor{keywordtype}{void} OnInspect(\textcolor{keyword}{const} std::shared\_ptr<Camera> \&cameraComponent) \textcolor{keyword}{override};}
\DoxyCodeLine{73 \};}
\DoxyCodeLine{74 \textcolor{keyword}{class }UNIENGINE\_API \mbox{\hyperlink{class_uni_engine_1_1_s_s_a_o}{SSAO}} : \textcolor{keyword}{public} \mbox{\hyperlink{class_uni_engine_1_1_post_processing_layer}{PostProcessingLayer}}}
\DoxyCodeLine{75 \{}
\DoxyCodeLine{76     \textcolor{keyword}{friend} \textcolor{keyword}{class }\mbox{\hyperlink{class_uni_engine_1_1_default_resources}{DefaultResources}};}
\DoxyCodeLine{77 }
\DoxyCodeLine{78     std::unique\_ptr<OpenGLUtils::GLTexture2D> m\_originalColor;}
\DoxyCodeLine{79     std::unique\_ptr<OpenGLUtils::GLTexture2D> m\_ssaoPosition;}
\DoxyCodeLine{80     std::unique\_ptr<OpenGLUtils::GLTexture2D> m\_blur;}
\DoxyCodeLine{81     \textcolor{keyword}{static} std::shared\_ptr<OpenGLUtils::GLProgram> m\_geometryProgram;}
\DoxyCodeLine{82     \textcolor{keyword}{static} std::shared\_ptr<OpenGLUtils::GLProgram> m\_blurProgram;}
\DoxyCodeLine{83     \textcolor{keyword}{static} std::shared\_ptr<OpenGLUtils::GLProgram> m\_combineProgram;}
\DoxyCodeLine{84 }
\DoxyCodeLine{85   \textcolor{keyword}{public}:}
\DoxyCodeLine{86     \textcolor{keywordtype}{float} m\_intensity = 1.0f;}
\DoxyCodeLine{87     \textcolor{keywordtype}{int} m\_diffusion = 8;}
\DoxyCodeLine{88     \textcolor{keywordtype}{int} m\_sampleStep = 1;}
\DoxyCodeLine{89     \mbox{\hyperlink{struct_uni_engine_1_1_bezier2_d}{Bezier2D}} \mbox{\hyperlink{class_uni_engine_1_1_s_s_a_o_a6028a6bf3c5d1393728123cfc45041a7}{m\_graph}};}
\DoxyCodeLine{90 }
\DoxyCodeLine{91     \textcolor{keywordtype}{float} m\_kernelRadius = 1.0f;}
\DoxyCodeLine{92     \textcolor{keywordtype}{float} m\_kernelBias = 0.01f;}
\DoxyCodeLine{93     \textcolor{keywordtype}{float} m\_scale = 1.0f;}
\DoxyCodeLine{94     \textcolor{keywordtype}{int} m\_sampleSize = 16;}
\DoxyCodeLine{95 }
\DoxyCodeLine{96     \mbox{\hyperlink{class_uni_engine_1_1_s_s_a_o}{SSAO}}();}
\DoxyCodeLine{97     \textcolor{keywordtype}{void} ResizeResolution(\textcolor{keywordtype}{int} x, \textcolor{keywordtype}{int} y) \textcolor{keyword}{override};}
\DoxyCodeLine{98     \textcolor{keywordtype}{void} Process(\textcolor{keyword}{const} std::shared\_ptr<Camera> \&cameraComponent, \mbox{\hyperlink{class_uni_engine_1_1_render_target}{RenderTarget}} \&renderTarget) \textcolor{keyword}{const override};}
\DoxyCodeLine{99     \textcolor{keywordtype}{void} OnInspect(\textcolor{keyword}{const} std::shared\_ptr<Camera> \&cameraComponent) \textcolor{keyword}{override};}
\DoxyCodeLine{100 \};}
\DoxyCodeLine{101 }
\DoxyCodeLine{102 \textcolor{keyword}{class }UNIENGINE\_API \mbox{\hyperlink{class_uni_engine_1_1_s_s_r}{SSR}} : \textcolor{keyword}{public} \mbox{\hyperlink{class_uni_engine_1_1_post_processing_layer}{PostProcessingLayer}}}
\DoxyCodeLine{103 \{}
\DoxyCodeLine{104     \textcolor{keyword}{friend} \textcolor{keyword}{class }\mbox{\hyperlink{class_uni_engine_1_1_default_resources}{DefaultResources}};}
\DoxyCodeLine{105 }
\DoxyCodeLine{106     std::unique\_ptr<OpenGLUtils::GLTexture2D> m\_originalColor;}
\DoxyCodeLine{107     std::unique\_ptr<OpenGLUtils::GLTexture2D> m\_reflectedColorVisibility;}
\DoxyCodeLine{108     std::unique\_ptr<OpenGLUtils::GLTexture2D> m\_blur;}
\DoxyCodeLine{109 }
\DoxyCodeLine{110     \textcolor{keyword}{static} std::shared\_ptr<OpenGLUtils::GLProgram> m\_reflectProgram;}
\DoxyCodeLine{111     \textcolor{keyword}{static} std::shared\_ptr<OpenGLUtils::GLProgram> m\_blurProgram;}
\DoxyCodeLine{112     \textcolor{keyword}{static} std::shared\_ptr<OpenGLUtils::GLProgram> m\_combineProgram;}
\DoxyCodeLine{113 }
\DoxyCodeLine{114   \textcolor{keyword}{public}:}
\DoxyCodeLine{115     \textcolor{keywordtype}{float} m\_intensity = 1.0f;}
\DoxyCodeLine{116     \textcolor{keywordtype}{int} m\_diffusion = 1;}
\DoxyCodeLine{117     \textcolor{keywordtype}{int} m\_sampleStep = 1;}
\DoxyCodeLine{118     \mbox{\hyperlink{struct_uni_engine_1_1_bezier2_d}{Bezier2D}} \mbox{\hyperlink{class_uni_engine_1_1_s_s_r_af2a5ecc68eca544aa55d67d42d94b04e}{m\_graph}};}
\DoxyCodeLine{119 }
\DoxyCodeLine{120     \textcolor{keywordtype}{float} m\_step = 0.5;}
\DoxyCodeLine{121     \textcolor{keywordtype}{float} m\_minRayStep = 0.1;}
\DoxyCodeLine{122     \textcolor{keywordtype}{int} m\_maxSteps = 16;}
\DoxyCodeLine{123     \textcolor{keywordtype}{int} m\_numBinarySearchSteps = 8;}
\DoxyCodeLine{124     \textcolor{keywordtype}{float} m\_reflectionSpecularFalloffExponent = 3.0;}
\DoxyCodeLine{125 }
\DoxyCodeLine{126     \mbox{\hyperlink{class_uni_engine_1_1_s_s_r}{SSR}}();}
\DoxyCodeLine{127     \textcolor{keywordtype}{void} ResizeResolution(\textcolor{keywordtype}{int} x, \textcolor{keywordtype}{int} y) \textcolor{keyword}{override};}
\DoxyCodeLine{128     \textcolor{keywordtype}{void} Process(\textcolor{keyword}{const} std::shared\_ptr<Camera> \&cameraComponent, \mbox{\hyperlink{class_uni_engine_1_1_render_target}{RenderTarget}} \&renderTarget) \textcolor{keyword}{const override};}
\DoxyCodeLine{129     \textcolor{keywordtype}{void} OnInspect(\textcolor{keyword}{const} std::shared\_ptr<Camera> \&cameraComponent) \textcolor{keyword}{override};}
\DoxyCodeLine{130 \};}
\DoxyCodeLine{131 \textcolor{preprocessor}{\#pragma endregion}}
\DoxyCodeLine{132 }
\DoxyCodeLine{133 \} \textcolor{comment}{// namespace UniEngine}}

\end{DoxyCode}
